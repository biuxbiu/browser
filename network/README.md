# 网络的传输协议

我们常见的网络协议可分为： `七层网络协议`，`TCP / IP协议`

#### 七层网络协议（大概了解）
应用层：FTP，WWW，Telnet，NFS，SMTP，Gateway，SNMP<BR>
表示层：TIFF，GIF，JPEG，PICT，ASCII，EBCDIC，encryption，MPEG，MIDI，HTML<BR>
会话层：RPC，SQL，NFS，NetBIOS，names，AppleTalk，ASP，DECnet，SCP<BR>
传输层：TCP，UDP，SPX<BR>
网络层：IP，IPX，AppleTalk DDP<BR>
数据链路层：Frame Relay，HDLC，PPP，IEEE802.3 / 802.2，FDDI，ATM，IEEE802.5 / 802.2<BR>
物理层：EIA / TIA - 232，EIA / TIA - 499，V.35，V.24，RJ45，Ethernet，802.3，802.5，FDDI，NRZI，NRZ，B8ZS


#### TCP/IP协议(重点)

`TCP/IP协议` 分四层，每一层都要求它下面的一层来满足它的需求。<br>


应用层：Http，elnet，FTP，SMTP，SNMP<br>
传输层：TCP，UDP，UGP<br>
网络层： IP，ICMP，IGMP<br>
数据链路层：ARP，RARP


#### 各个层的功能
应用层：提供用户程序接口<br>
传输层：提供传输顺序信息与响应<Br>
网络层：提供数据通过的路由<br>
数据链路层：进行数据打包与解包，形成信息帧<br>
物理层：实现计算机系统与网络间的物理连接<br>
会话层：建立和中止连接<br>
表示层：数据转换、确认数据格式<br>


#### 什么是TCP/IP协议  
`TCP/IP协议` 更准确来说，它是一个统称；它包含了 `IP协议`，`TCP协议`，`Http协议`，`Ftp协议`等等。

网络协议本来就是一个大的体系，我们要弄清楚它不是一件容易的事情，这里我们主要来了解一下 `一个主机的数据是怎么安全到达到对方的主机上的`。

互联网上的数据是通过数据包来传输的，如果数据很大的话，会被拆分为多个小数据包传输。比如我们平常看到的视频，听到的音乐等等都是通过多个小数据包来传输过来的。

#### 什么是IP

`IP`：网际协议（Internet Protocol，简称 IP），可以理解为计算机的地址；<br>
我们数据要在网络上传输，需要基于网际协议传输。互联网上每一件设备都有它自己的地址，而这个地址是唯一的。有了这个地址，计算机之间就可以互相往来通信，传输数据包。

>`IP`地址好比是你的家庭地址，有了你的家庭地址你就可以跟别人寄送包裹和接受包裹。

<br>
一个数据包从 `主机A` 传送到 `主机B` ，那么在传输之前，数据包会附加上一个 `IP头` 。这个 `IP头` 的数据结构 `IP地址信息` ， `IP版本` 等等。

>`IP头` 数据结构里有 `主机A` 和 `主机B` 的 `IP地址信息` ，有了这个 `IP地址信息` ，数据包才能够送到到 `主机B` ， `主机B` 才能回复`主机A` 。


<br>

* `主机A` 的 `上层` 将数据包交给网络层进行传输；
* 网络层将 `IP头` 附加到数据包上，称为 `IP数据包` ， 然后转交给 `底层` ；
* `底层` 通过物理网络将数据包传输到 `主机B` 的网络层；
* `主机B` 的网络层把 `IP数据包` 进行拆分，把 `IP头` 留下，将数据交给 `主机B` 的 `上层` ；

<br>
<br>

#### 什么是UDP

`UDP` 负责把数据包送到到应用程序；

刚才我们说的 `IP` 只负责把数据包从 `主机A` 传送到 `主机B` 。但是 `主机B` 只接收了数据包，并不知道要把数据包发给哪个应用程序。这个时候，就有了能够和应用程序沟通的协议，这就是 `用户数据包协议` ，简称 `UDP` ；  

`UDP` 有一个强大的强大的功能，它能够识别端口号，每一个想访问网路的应用实例都有一个端口号，通过端口号， `UDP` 就能把数据包送达到指定的应用程序。 

* `主机A` 的 `上层` 将数据包交给传输层；
* 传输层会把 `UDP头` 附加在这个数据包上，形成 `UDP数据包` ，再将 `UDP数据包` 交给网络层；
* 网络层结果 `UDP数据包` 之后再附加一个 `IP头` 形成新的 `IP数据包` ，再交给底层；
* 底层通过物理网络传输，将数据包发送到 `主机B` ；
* `主机B` 的网络层拆分 `IP头` ，变成了 `UDP数据包` ，交给了传输层；
* 传输层的 `UDP头` 识别出了端口号，告知要把数据包交给哪个对应的应用程序；

<br><br>

在数据的传输过程当中，有各种因素导致数据包不能够完整的送达。虽然 `UDP` 可以知道要把数据分发到哪个应用程序，但是在数据包丢失的情况下，它并没有重发机制，并且 `UDP` 也不知道数据包有没有完整到达目的地；

>`UDP` 不能保证数据的可靠性，但是它的传输速度很快，所以一般来说，`UDP` 被一些对数据完整性并不那么重视的项目采纳，比如视频，音频，互动游戏等等。<br>
`UDP` 并不是面向链接的， `UDP` 在传输前并不确认链接关系

<!-- https://juejin.im/post/59e9ce696fb9a04500022e06 -->


<!-- https://juejin.im/post/586cfcf8da2f600055ce8a8d -->